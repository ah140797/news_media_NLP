<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Extracting NER’s | Taliban Project</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Extracting NER’s | Taliban Project" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Extracting NER’s | Taliban Project" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Anders Havbro Hjulmand" />


<meta name="date" content="2021-12-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="overview-1.html"/>
<link rel="next" href="maps-vizualisations.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.17/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Taliban Project</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i>Software</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure"><i class="fa fa-check"></i>Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-read-the-notebook"><i class="fa fa-check"></i>How to read the notebook</a></li>
</ul></li>
<li class="part"><span><b>I New York Times</b></span></li>
<li class="chapter" data-level="1" data-path="scraping-news-articles-with-new-york-times-api.html"><a href="scraping-news-articles-with-new-york-times-api.html"><i class="fa fa-check"></i><b>1</b> Scraping News Articles with New York Times API</a></li>
<li class="chapter" data-level="2" data-path="cleaning-the-data.html"><a href="cleaning-the-data.html"><i class="fa fa-check"></i><b>2</b> Cleaning The Data</a></li>
<li class="chapter" data-level="3" data-path="scrape-bread-text-of-articles.html"><a href="scrape-bread-text-of-articles.html"><i class="fa fa-check"></i><b>3</b> Scrape bread text of articles</a>
<ul>
<li class="chapter" data-level="3.1" data-path="scrape-bread-text-of-articles.html"><a href="scrape-bread-text-of-articles.html#scraping-in-python"><i class="fa fa-check"></i><b>3.1</b> Scraping in Python</a></li>
<li class="chapter" data-level="3.2" data-path="scrape-bread-text-of-articles.html"><a href="scrape-bread-text-of-articles.html#inspecting-the-bread-text"><i class="fa fa-check"></i><b>3.2</b> Inspecting the bread text</a></li>
</ul></li>
<li class="part"><span><b>II The Guardian</b></span></li>
<li class="chapter" data-level="4" data-path="scraping-articles-form-the-guardian.html"><a href="scraping-articles-form-the-guardian.html"><i class="fa fa-check"></i><b>4</b> Scraping articles form the Guardian</a></li>
<li class="chapter" data-level="5" data-path="cleaning-the-data-1.html"><a href="cleaning-the-data-1.html"><i class="fa fa-check"></i><b>5</b> Cleaning the Data</a></li>
<li class="chapter" data-level="6" data-path="scrape-bread-text-of-articles-1.html"><a href="scrape-bread-text-of-articles-1.html"><i class="fa fa-check"></i><b>6</b> Scrape bread text of articles</a>
<ul>
<li class="chapter" data-level="6.1" data-path="scrape-bread-text-of-articles-1.html"><a href="scrape-bread-text-of-articles-1.html#scraping-in-python-1"><i class="fa fa-check"></i><b>6.1</b> Scraping in Python</a></li>
<li class="chapter" data-level="6.2" data-path="scrape-bread-text-of-articles-1.html"><a href="scrape-bread-text-of-articles-1.html#inspecting-the-bread-text-1"><i class="fa fa-check"></i><b>6.2</b> Inspecting the bread text</a></li>
</ul></li>
<li class="part"><span><b>III Preprocess breadtext</b></span></li>
<li class="chapter" data-level="7" data-path="preprocess-breadtext-for-both-datasets.html"><a href="preprocess-breadtext-for-both-datasets.html"><i class="fa fa-check"></i><b>7</b> Preprocess Breadtext for both Datasets</a></li>
<li class="part"><span><b>IV Named Entity recognition (NER)</b></span></li>
<li class="chapter" data-level="" data-path="overview-1.html"><a href="overview-1.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="overview-1.html"><a href="overview-1.html#structure-1"><i class="fa fa-check"></i>Structure</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="extracting-ners.html"><a href="extracting-ners.html"><i class="fa fa-check"></i><b>8</b> Extracting NER’s</a></li>
<li class="chapter" data-level="9" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html"><i class="fa fa-check"></i><b>9</b> Maps vizualisations</a>
<ul>
<li class="chapter" data-level="9.1" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#preparing-the-data"><i class="fa fa-check"></i><b>9.1</b> Preparing the data</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#renaming-countries"><i class="fa fa-check"></i><b>9.1.1</b> Renaming Countries</a></li>
<li class="chapter" data-level="9.1.2" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#every-country-gets-a-row-for-every-date"><i class="fa fa-check"></i><b>9.1.2</b> Every country gets a row for every date</a></li>
<li class="chapter" data-level="9.1.3" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#making-a-unique-dataset-for-plotly-and-shiny-respectively"><i class="fa fa-check"></i><b>9.1.3</b> Making a unique dataset for Plotly and Shiny respectively</a></li>
<li class="chapter" data-level="9.1.4" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#making-a-penalized-count"><i class="fa fa-check"></i><b>9.1.4</b> Making a penalized count</a></li>
<li class="chapter" data-level="9.1.5" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#binsize"><i class="fa fa-check"></i><b>9.1.5</b> Setting up the binsize</a></li>
<li class="chapter" data-level="9.1.6" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#fixing-the-legend-scales-to-absolute-values."><i class="fa fa-check"></i><b>9.1.6</b> Fixing the legend scales to absolute values.</a></li>
<li class="chapter" data-level="9.1.7" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#making-a-dataframe-with-contrasts"><i class="fa fa-check"></i><b>9.1.7</b> Making a dataframe with contrasts</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#plotly-maps"><i class="fa fa-check"></i><b>9.2</b> Plotly Maps</a></li>
<li class="chapter" data-level="9.3" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#shiny-app"><i class="fa fa-check"></i><b>9.3</b> Shiny App</a></li>
<li class="chapter" data-level="9.4" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#popcircle"><i class="fa fa-check"></i><b>9.4</b> Popcircle</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#new-york-times"><i class="fa fa-check"></i><b>9.4.1</b> New York Times</a></li>
<li class="chapter" data-level="9.4.2" data-path="maps-vizualisations.html"><a href="maps-vizualisations.html#the-guardian"><i class="fa fa-check"></i><b>9.4.2</b> The Guardian</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html"><i class="fa fa-check"></i><b>10</b> Persons Vizualisation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#standardize-to-hits-pr.-article-and-grouping-by-month"><i class="fa fa-check"></i><b>10.1</b> Standardize to hits pr. article and grouping by month</a></li>
<li class="chapter" data-level="10.2" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#color-palettes"><i class="fa fa-check"></i><b>10.2</b> Color Palettes</a></li>
<li class="chapter" data-level="10.3" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#united-states-presidents"><i class="fa fa-check"></i><b>10.3</b> United States Presidents</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#summary-plot"><i class="fa fa-check"></i><b>10.3.1</b> Summary plot</a></li>
<li class="chapter" data-level="10.3.2" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#george-w.-bush"><i class="fa fa-check"></i><b>10.3.2</b> George W. Bush</a></li>
<li class="chapter" data-level="10.3.3" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#barack-obama"><i class="fa fa-check"></i><b>10.3.3</b> Barack Obama</a></li>
<li class="chapter" data-level="10.3.4" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#donald-trump"><i class="fa fa-check"></i><b>10.3.4</b> Donald Trump</a></li>
<li class="chapter" data-level="10.3.5" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#combined-plots"><i class="fa fa-check"></i><b>10.3.5</b> Combined Plots</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#british-prime-ministers"><i class="fa fa-check"></i><b>10.4</b> British Prime Ministers</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#summary-plot-1"><i class="fa fa-check"></i><b>10.4.1</b> Summary plot</a></li>
<li class="chapter" data-level="10.4.2" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#tony-blair"><i class="fa fa-check"></i><b>10.4.2</b> Tony Blair</a></li>
<li class="chapter" data-level="10.4.3" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#david-cameron"><i class="fa fa-check"></i><b>10.4.3</b> David Cameron</a></li>
<li class="chapter" data-level="10.4.4" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#boris-johnson"><i class="fa fa-check"></i><b>10.4.4</b> Boris Johnson</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#afghanistan-presidents"><i class="fa fa-check"></i><b>10.5</b> Afghanistan Presidents</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#summary-plot-2"><i class="fa fa-check"></i><b>10.5.1</b> Summary plot</a></li>
<li class="chapter" data-level="10.5.2" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#hamid-karzai"><i class="fa fa-check"></i><b>10.5.2</b> Hamid Karzai</a></li>
<li class="chapter" data-level="10.5.3" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#ashraf-ghani"><i class="fa fa-check"></i><b>10.5.3</b> Ashraf Ghani</a></li>
<li class="chapter" data-level="10.5.4" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#combined-plots-1"><i class="fa fa-check"></i><b>10.5.4</b> Combined Plots</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#other-persons"><i class="fa fa-check"></i><b>10.6</b> Other Persons</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#summary-plot-3"><i class="fa fa-check"></i><b>10.6.1</b> Summary plot</a></li>
<li class="chapter" data-level="10.6.2" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#osama-bin-laden"><i class="fa fa-check"></i><b>10.6.2</b> Osama bin Laden</a></li>
<li class="chapter" data-level="10.6.3" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#saddam-hussein"><i class="fa fa-check"></i><b>10.6.3</b> Saddam Hussein</a></li>
<li class="chapter" data-level="10.6.4" data-path="persons-vizualisation.html"><a href="persons-vizualisation.html#combined-plots-2"><i class="fa fa-check"></i><b>10.6.4</b> Combined Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html"><i class="fa fa-check"></i><b>11</b> Organisations Vizualisations</a>
<ul>
<li class="chapter" data-level="11.1" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#standardize-names-of-organisations"><i class="fa fa-check"></i><b>11.1</b> Standardize names of organisations</a></li>
<li class="chapter" data-level="11.2" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#standardize-to-hits-pr.-article-and-grouping-by-month-1"><i class="fa fa-check"></i><b>11.2</b> Standardize to hits pr. article and grouping by month</a></li>
<li class="chapter" data-level="11.3" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#color-palettes-1"><i class="fa fa-check"></i><b>11.3</b> Color Palettes</a></li>
<li class="chapter" data-level="11.4" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#summary-plot-4"><i class="fa fa-check"></i><b>11.4</b> Summary plot</a></li>
<li class="chapter" data-level="11.5" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#nato"><i class="fa fa-check"></i><b>11.5</b> NATO</a></li>
<li class="chapter" data-level="11.6" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#taliban"><i class="fa fa-check"></i><b>11.6</b> Taliban</a></li>
<li class="chapter" data-level="11.7" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#al-qaeda"><i class="fa fa-check"></i><b>11.7</b> Al Qaeda</a></li>
<li class="chapter" data-level="11.8" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#hamas"><i class="fa fa-check"></i><b>11.8</b> Hamas</a></li>
<li class="chapter" data-level="11.9" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#hezbollah"><i class="fa fa-check"></i><b>11.9</b> Hezbollah</a></li>
<li class="chapter" data-level="11.10" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#combined-plots-for-all-key-organisations"><i class="fa fa-check"></i><b>11.10</b> Combined Plots for all Key Organisations</a>
<ul>
<li class="chapter" data-level="11.10.1" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#new-york-times-5"><i class="fa fa-check"></i><b>11.10.1</b> New York Times</a></li>
<li class="chapter" data-level="11.10.2" data-path="organisations-vizualisations.html"><a href="organisations-vizualisations.html#the-guardian-5"><i class="fa fa-check"></i><b>11.10.2</b> The Guardian</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="nouns-verbs-and-adjectives-vizualisation.html"><a href="nouns-verbs-and-adjectives-vizualisation.html"><i class="fa fa-check"></i><b>12</b> Nouns, Verbs and Adjectives Vizualisation</a>
<ul>
<li class="chapter" data-level="12.1" data-path="nouns-verbs-and-adjectives-vizualisation.html"><a href="nouns-verbs-and-adjectives-vizualisation.html#color-palettes-2"><i class="fa fa-check"></i><b>12.1</b> Color Palettes</a></li>
<li class="chapter" data-level="12.2" data-path="nouns-verbs-and-adjectives-vizualisation.html"><a href="nouns-verbs-and-adjectives-vizualisation.html#top-5-nouns"><i class="fa fa-check"></i><b>12.2</b> Top 5 Nouns</a></li>
<li class="chapter" data-level="12.3" data-path="nouns-verbs-and-adjectives-vizualisation.html"><a href="nouns-verbs-and-adjectives-vizualisation.html#top-5-verbs"><i class="fa fa-check"></i><b>12.3</b> Top 5 Verbs</a></li>
<li class="chapter" data-level="12.4" data-path="nouns-verbs-and-adjectives-vizualisation.html"><a href="nouns-verbs-and-adjectives-vizualisation.html#top-5-adjectives"><i class="fa fa-check"></i><b>12.4</b> Top 5 Adjectives</a></li>
</ul></li>
<li class="part"><span><b>V Sentiment Analysis</b></span></li>
<li class="chapter" data-level="" data-path="overview-2.html"><a href="overview-2.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="13" data-path="sentiment-analysis.html"><a href="sentiment-analysis.html"><i class="fa fa-check"></i><b>13</b> Sentiment Analysis</a></li>
<li class="chapter" data-level="14" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html"><i class="fa fa-check"></i><b>14</b> Sentiment Vizualisations</a>
<ul>
<li class="chapter" data-level="14.1" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html#data-wrangling"><i class="fa fa-check"></i><b>14.1</b> Data wrangling</a></li>
<li class="chapter" data-level="14.2" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html#color-palettes-3"><i class="fa fa-check"></i><b>14.2</b> Color Palettes</a></li>
<li class="chapter" data-level="14.3" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html#polarity"><i class="fa fa-check"></i><b>14.3</b> Polarity</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html#summary-stats"><i class="fa fa-check"></i><b>14.3.1</b> Summary stats</a></li>
<li class="chapter" data-level="14.3.2" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html#timeline"><i class="fa fa-check"></i><b>14.3.2</b> Timeline</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html#subjectivity"><i class="fa fa-check"></i><b>14.4</b> Subjectivity</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html#summary-stats-1"><i class="fa fa-check"></i><b>14.4.1</b> Summary stats</a></li>
<li class="chapter" data-level="14.4.2" data-path="sentiment-vizualisations.html"><a href="sentiment-vizualisations.html#timeline-1"><i class="fa fa-check"></i><b>14.4.2</b> Timeline</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VI LDA Topic Modelling</b></span></li>
<li class="chapter" data-level="" data-path="overview-3.html"><a href="overview-3.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="overview-3.html"><a href="overview-3.html#what-is-an-lda-topic-model"><i class="fa fa-check"></i>What is an LDA topic model?</a></li>
<li class="chapter" data-level="" data-path="overview-3.html"><a href="overview-3.html#example"><i class="fa fa-check"></i>Example</a></li>
<li class="chapter" data-level="" data-path="overview-3.html"><a href="overview-3.html#the-goal-of-lda-topic-model"><i class="fa fa-check"></i>The goal of LDA topic model</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html"><i class="fa fa-check"></i><b>15</b> LDA Topic Modelling</a>
<ul>
<li class="chapter" data-level="15.1" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#packages-and-data"><i class="fa fa-check"></i><b>15.1</b> Packages and Data</a></li>
<li class="chapter" data-level="15.2" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#preprocessing"><i class="fa fa-check"></i><b>15.2</b> Preprocessing</a></li>
<li class="chapter" data-level="15.3" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#bigrams-and-trigrams"><i class="fa fa-check"></i><b>15.3</b> Bigrams and Trigrams</a></li>
<li class="chapter" data-level="15.4" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#tf-idf-removal"><i class="fa fa-check"></i><b>15.4</b> TF-IDF Removal</a></li>
<li class="chapter" data-level="15.5" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#base-topic-model"><i class="fa fa-check"></i><b>15.5</b> Base topic model</a></li>
<li class="chapter" data-level="15.6" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#selecting-the-number-of-topics-based-on-coherence-score"><i class="fa fa-check"></i><b>15.6</b> Selecting the number of topics based on coherence score</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#selecting-number-of-topics-for-new-york-times"><i class="fa fa-check"></i><b>15.6.1</b> Selecting number of topics for New York Times</a></li>
<li class="chapter" data-level="15.6.2" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#selecting-number-of-topics-for-the-guardian"><i class="fa fa-check"></i><b>15.6.2</b> Selecting number of topics for The Guardian</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#building-the-topic-models"><i class="fa fa-check"></i><b>15.7</b> Building the topic models</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#new-york-times-topic-model"><i class="fa fa-check"></i><b>15.7.1</b> New York Times topic model</a></li>
<li class="chapter" data-level="15.7.2" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#the-guardian-topic-model"><i class="fa fa-check"></i><b>15.7.2</b> The Guardian topic model</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#assigning-one-topic-to-each-article"><i class="fa fa-check"></i><b>15.8</b> Assigning one topic to each article</a>
<ul>
<li class="chapter" data-level="15.8.1" data-path="lda-topic-modelling.html"><a href="lda-topic-modelling.html#evaluating-the-assignment-of-one-article"><i class="fa fa-check"></i><b>15.8.1</b> Evaluating the assignment of one article</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="topic-model-interpretation-and-vizualisation.html"><a href="topic-model-interpretation-and-vizualisation.html"><i class="fa fa-check"></i><b>16</b> Topic Model Interpretation and Vizualisation</a>
<ul>
<li class="chapter" data-level="16.1" data-path="topic-model-interpretation-and-vizualisation.html"><a href="topic-model-interpretation-and-vizualisation.html#plotting-topic-prevalence"><i class="fa fa-check"></i><b>16.1</b> Plotting topic prevalence</a></li>
<li class="chapter" data-level="16.2" data-path="topic-model-interpretation-and-vizualisation.html"><a href="topic-model-interpretation-and-vizualisation.html#plotting-topic-prevalence-over-time"><i class="fa fa-check"></i><b>16.2</b> Plotting topic prevalence over time</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="topic-model-interpretation-and-vizualisation.html"><a href="topic-model-interpretation-and-vizualisation.html#data-wrangling-1"><i class="fa fa-check"></i><b>16.2.1</b> Data Wrangling</a></li>
<li class="chapter" data-level="16.2.2" data-path="topic-model-interpretation-and-vizualisation.html"><a href="topic-model-interpretation-and-vizualisation.html#plots"><i class="fa fa-check"></i><b>16.2.2</b> Plots</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="topic-model-interpretation-and-vizualisation.html"><a href="topic-model-interpretation-and-vizualisation.html#does-topics-differ-in-polarity-and-subjectivity"><i class="fa fa-check"></i><b>16.3</b> Does topics differ in polarity and subjectivity?</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="topic-model-interpretation-and-vizualisation.html"><a href="topic-model-interpretation-and-vizualisation.html#polarity-1"><i class="fa fa-check"></i><b>16.3.1</b> Polarity</a></li>
<li class="chapter" data-level="16.3.2" data-path="topic-model-interpretation-and-vizualisation.html"><a href="topic-model-interpretation-and-vizualisation.html#subjectivity-1"><i class="fa fa-check"></i><b>16.3.2</b> Subjectivity</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Miscellaneous</b></span></li>
<li class="chapter" data-level="17" data-path="miscellaneous-plots.html"><a href="miscellaneous-plots.html"><i class="fa fa-check"></i><b>17</b> Miscellaneous Plots</a></li>
<li class="chapter" data-level="18" data-path="gender-dataset-for-further-analysis.html"><a href="gender-dataset-for-further-analysis.html"><i class="fa fa-check"></i><b>18</b> Gender Dataset for further analysis</a>
<ul>
<li class="chapter" data-level="18.1" data-path="gender-dataset-for-further-analysis.html"><a href="gender-dataset-for-further-analysis.html#dataset-with-authors"><i class="fa fa-check"></i><b>18.1</b> Dataset with authors</a></li>
<li class="chapter" data-level="18.2" data-path="gender-dataset-for-further-analysis.html"><a href="gender-dataset-for-further-analysis.html#comparing-the-datasets"><i class="fa fa-check"></i><b>18.2</b> Comparing the datasets</a></li>
<li class="chapter" data-level="18.3" data-path="gender-dataset-for-further-analysis.html"><a href="gender-dataset-for-further-analysis.html#adding-gender-information-to-nyt_aut"><i class="fa fa-check"></i><b>18.3</b> Adding gender information to <code>NYT_aut</code></a></li>
</ul></li>
<li class="part"><span><b>VIII References</b></span></li>
<li class="chapter" data-level="19" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>19</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">See Github Repo</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Taliban Project</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="extracting-ners" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> Extracting NER’s</h1>
<style>
div.green { background-color:#93c47d; border-radius: 5px; padding: 20px;}
</style>
<div class="green">
<p>This chapter is written in Python. To see the original file go to the folder python_scripts/.</p>
</div>
<style>
div.blue { background-color:#76a5af; border-radius: 5px; padding: 20px;}
</style>
<div class="blue">
<p>All the code in the chapter is run on both df_NYT and df_guardian but here i only show the processing df_NYT.</p>
</div>
<p>Lets move into the code. We load up packages, data and the small english model.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="extracting-ners.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> spacy</span>
<span id="cb51-2"><a href="extracting-ners.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb51-3"><a href="extracting-ners.html#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb51-4"><a href="extracting-ners.html#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> Counter</span>
<span id="cb51-5"><a href="extracting-ners.html#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="extracting-ners.html#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">#loading the dataframes and combining them </span></span>
<span id="cb51-7"><a href="extracting-ners.html#cb51-7" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/new_york_times/NYT_clean_1.csv&quot;</span>)</span>
<span id="cb51-8"><a href="extracting-ners.html#cb51-8" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/new_york_times/NYT_clean_2.csv&quot;</span>)</span>
<span id="cb51-9"><a href="extracting-ners.html#cb51-9" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> pd.read_csv((<span class="st">&quot;data/new_york_times/NYT_clean_3.csv&quot;</span>)</span>
<span id="cb51-10"><a href="extracting-ners.html#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="extracting-ners.html#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="co">#combining</span></span>
<span id="cb51-12"><a href="extracting-ners.html#cb51-12" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([df1, df2, df3])</span>
<span id="cb51-13"><a href="extracting-ners.html#cb51-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-14"><a href="extracting-ners.html#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="co">#loading small english model</span></span>
<span id="cb51-15"><a href="extracting-ners.html#cb51-15" aria-hidden="true" tabindex="-1"></a>nlp <span class="op">=</span> spacy.load(<span class="st">&quot;en_core_web_sm&quot;</span>)</span></code></pre></div>
<p>Next up we define helper functions that pick up entities and assign them to a category, e.g. person or Organisation (ORG) There are a lot of functions below but really it is just repetition of the same procedure: The functions takes an article and filters out entities from the desired category (e.g. VERB or GPE). It then adds a date-stamp to them. Lastly it makes a counter-object which is a special type of object data that groups values by unique names and counts the number of instances. Lets go bby.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="extracting-ners.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#-------------functions for counting the number of instances of different objects---------------------</span></span>
<span id="cb52-2"><a href="extracting-ners.html#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="extracting-ners.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Nouns</span></span>
<span id="cb52-4"><a href="extracting-ners.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> noun_freq(article):   </span>
<span id="cb52-5"><a href="extracting-ners.html#cb52-5" aria-hidden="true" tabindex="-1"></a> nouns <span class="op">=</span> [token.text <span class="cf">for</span> token <span class="kw">in</span> article <span class="cf">if</span> token.pos_ <span class="op">==</span> <span class="st">&quot;NOUN&quot;</span>]</span>
<span id="cb52-6"><a href="extracting-ners.html#cb52-6" aria-hidden="true" tabindex="-1"></a> new_nouns <span class="op">=</span> []</span>
<span id="cb52-7"><a href="extracting-ners.html#cb52-7" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> noun <span class="kw">in</span> nouns:</span>
<span id="cb52-8"><a href="extracting-ners.html#cb52-8" aria-hidden="true" tabindex="-1"></a>    noun <span class="op">=</span> noun <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> Date</span>
<span id="cb52-9"><a href="extracting-ners.html#cb52-9" aria-hidden="true" tabindex="-1"></a>    noun <span class="op">=</span> noun <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="bu">str</span>(article_index)  </span>
<span id="cb52-10"><a href="extracting-ners.html#cb52-10" aria-hidden="true" tabindex="-1"></a>    new_nouns.append(noun)</span>
<span id="cb52-11"><a href="extracting-ners.html#cb52-11" aria-hidden="true" tabindex="-1"></a> noun_freq <span class="op">=</span> Counter(new_nouns)</span>
<span id="cb52-12"><a href="extracting-ners.html#cb52-12" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span>(noun_freq)</span>
<span id="cb52-13"><a href="extracting-ners.html#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="extracting-ners.html#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Verbs</span></span>
<span id="cb52-15"><a href="extracting-ners.html#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> verb_freq(article):     </span>
<span id="cb52-16"><a href="extracting-ners.html#cb52-16" aria-hidden="true" tabindex="-1"></a> verbs <span class="op">=</span> [token.text <span class="cf">for</span> token <span class="kw">in</span> article <span class="cf">if</span> token.pos_ <span class="op">==</span> <span class="st">&quot;VERB&quot;</span>]</span>
<span id="cb52-17"><a href="extracting-ners.html#cb52-17" aria-hidden="true" tabindex="-1"></a> new_verbs <span class="op">=</span> []</span>
<span id="cb52-18"><a href="extracting-ners.html#cb52-18" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> verb <span class="kw">in</span> verbs:</span>
<span id="cb52-19"><a href="extracting-ners.html#cb52-19" aria-hidden="true" tabindex="-1"></a>    verb <span class="op">=</span> verb <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> Date</span>
<span id="cb52-20"><a href="extracting-ners.html#cb52-20" aria-hidden="true" tabindex="-1"></a>    verb <span class="op">=</span> verb <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="bu">str</span>(article_index)   </span>
<span id="cb52-21"><a href="extracting-ners.html#cb52-21" aria-hidden="true" tabindex="-1"></a>    new_verbs.append(verb)</span>
<span id="cb52-22"><a href="extracting-ners.html#cb52-22" aria-hidden="true" tabindex="-1"></a> verb_freq <span class="op">=</span> Counter(new_verbs)</span>
<span id="cb52-23"><a href="extracting-ners.html#cb52-23" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span>(verb_freq)</span>
<span id="cb52-24"><a href="extracting-ners.html#cb52-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-25"><a href="extracting-ners.html#cb52-25" aria-hidden="true" tabindex="-1"></a><span class="co">#Adjectives</span></span>
<span id="cb52-26"><a href="extracting-ners.html#cb52-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> adjective_freq(article):   </span>
<span id="cb52-27"><a href="extracting-ners.html#cb52-27" aria-hidden="true" tabindex="-1"></a> adjectives <span class="op">=</span> [token.text <span class="cf">for</span> token <span class="kw">in</span> article <span class="cf">if</span> token.pos_ <span class="op">==</span> <span class="st">&quot;ADJ&quot;</span>]</span>
<span id="cb52-28"><a href="extracting-ners.html#cb52-28" aria-hidden="true" tabindex="-1"></a> new_adjectives <span class="op">=</span> []</span>
<span id="cb52-29"><a href="extracting-ners.html#cb52-29" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> adjective <span class="kw">in</span> adjectives:</span>
<span id="cb52-30"><a href="extracting-ners.html#cb52-30" aria-hidden="true" tabindex="-1"></a>    adjective <span class="op">=</span> adjective <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> Date</span>
<span id="cb52-31"><a href="extracting-ners.html#cb52-31" aria-hidden="true" tabindex="-1"></a>    adjective <span class="op">=</span> adjective <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="bu">str</span>(article_index)   </span>
<span id="cb52-32"><a href="extracting-ners.html#cb52-32" aria-hidden="true" tabindex="-1"></a>    new_adjectives.append(adjective)</span>
<span id="cb52-33"><a href="extracting-ners.html#cb52-33" aria-hidden="true" tabindex="-1"></a> adjective_freq <span class="op">=</span> Counter(new_adjectives)</span>
<span id="cb52-34"><a href="extracting-ners.html#cb52-34" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span>(adjective_freq)</span>
<span id="cb52-35"><a href="extracting-ners.html#cb52-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-36"><a href="extracting-ners.html#cb52-36" aria-hidden="true" tabindex="-1"></a><span class="co">#GPE</span></span>
<span id="cb52-37"><a href="extracting-ners.html#cb52-37" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> GPE_freq(article):   </span>
<span id="cb52-38"><a href="extracting-ners.html#cb52-38" aria-hidden="true" tabindex="-1"></a> GPEs <span class="op">=</span> [token.text <span class="cf">for</span> token <span class="kw">in</span> article <span class="cf">if</span> token.ent_type_ <span class="op">==</span> <span class="st">&quot;GPE&quot;</span>]</span>
<span id="cb52-39"><a href="extracting-ners.html#cb52-39" aria-hidden="true" tabindex="-1"></a> new_GPEs <span class="op">=</span> []</span>
<span id="cb52-40"><a href="extracting-ners.html#cb52-40" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> GPE <span class="kw">in</span> GPEs:</span>
<span id="cb52-41"><a href="extracting-ners.html#cb52-41" aria-hidden="true" tabindex="-1"></a>    GPE <span class="op">=</span> GPE <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> Date</span>
<span id="cb52-42"><a href="extracting-ners.html#cb52-42" aria-hidden="true" tabindex="-1"></a>    GPE <span class="op">=</span> GPE <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="bu">str</span>(article_index)  </span>
<span id="cb52-43"><a href="extracting-ners.html#cb52-43" aria-hidden="true" tabindex="-1"></a>    new_GPEs.append(GPE)</span>
<span id="cb52-44"><a href="extracting-ners.html#cb52-44" aria-hidden="true" tabindex="-1"></a> GPE_freq <span class="op">=</span> Counter(new_GPEs)</span>
<span id="cb52-45"><a href="extracting-ners.html#cb52-45" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span>(GPE_freq)</span>
<span id="cb52-46"><a href="extracting-ners.html#cb52-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-47"><a href="extracting-ners.html#cb52-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-48"><a href="extracting-ners.html#cb52-48" aria-hidden="true" tabindex="-1"></a><span class="co">#FAC - buildings, airports, brigdes etc.</span></span>
<span id="cb52-49"><a href="extracting-ners.html#cb52-49" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> FAC_freq(article):   </span>
<span id="cb52-50"><a href="extracting-ners.html#cb52-50" aria-hidden="true" tabindex="-1"></a> FACs <span class="op">=</span> [token.text <span class="cf">for</span> token <span class="kw">in</span> article <span class="cf">if</span> token.ent_type_ <span class="op">==</span> <span class="st">&quot;FAC&quot;</span>]</span>
<span id="cb52-51"><a href="extracting-ners.html#cb52-51" aria-hidden="true" tabindex="-1"></a> new_FACs <span class="op">=</span> []</span>
<span id="cb52-52"><a href="extracting-ners.html#cb52-52" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> FAC <span class="kw">in</span> FACs:</span>
<span id="cb52-53"><a href="extracting-ners.html#cb52-53" aria-hidden="true" tabindex="-1"></a>    FAC <span class="op">=</span> FAC <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> Date</span>
<span id="cb52-54"><a href="extracting-ners.html#cb52-54" aria-hidden="true" tabindex="-1"></a>    FAC <span class="op">=</span> FAC <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="bu">str</span>(article_index)   </span>
<span id="cb52-55"><a href="extracting-ners.html#cb52-55" aria-hidden="true" tabindex="-1"></a>    new_FACs.append(FAC)</span>
<span id="cb52-56"><a href="extracting-ners.html#cb52-56" aria-hidden="true" tabindex="-1"></a> FAC_freq <span class="op">=</span> Counter(new_FACs)</span>
<span id="cb52-57"><a href="extracting-ners.html#cb52-57" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span>(FAC_freq)</span>
<span id="cb52-58"><a href="extracting-ners.html#cb52-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-59"><a href="extracting-ners.html#cb52-59" aria-hidden="true" tabindex="-1"></a><span class="co">#Person</span></span>
<span id="cb52-60"><a href="extracting-ners.html#cb52-60" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> person_freq(article):   </span>
<span id="cb52-61"><a href="extracting-ners.html#cb52-61" aria-hidden="true" tabindex="-1"></a> persons <span class="op">=</span> [token.text <span class="cf">for</span> token <span class="kw">in</span> article <span class="cf">if</span> token.ent_type_ <span class="op">==</span> <span class="st">&quot;PERSON&quot;</span>]</span>
<span id="cb52-62"><a href="extracting-ners.html#cb52-62" aria-hidden="true" tabindex="-1"></a> new_persons <span class="op">=</span> []</span>
<span id="cb52-63"><a href="extracting-ners.html#cb52-63" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> person <span class="kw">in</span> persons:</span>
<span id="cb52-64"><a href="extracting-ners.html#cb52-64" aria-hidden="true" tabindex="-1"></a>    person <span class="op">=</span> person <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> Date</span>
<span id="cb52-65"><a href="extracting-ners.html#cb52-65" aria-hidden="true" tabindex="-1"></a>    person <span class="op">=</span> person <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="bu">str</span>(article_index) </span>
<span id="cb52-66"><a href="extracting-ners.html#cb52-66" aria-hidden="true" tabindex="-1"></a>    new_persons.append(person)</span>
<span id="cb52-67"><a href="extracting-ners.html#cb52-67" aria-hidden="true" tabindex="-1"></a> person_freq <span class="op">=</span> Counter(new_persons)</span>
<span id="cb52-68"><a href="extracting-ners.html#cb52-68" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span>(person_freq)</span>
<span id="cb52-69"><a href="extracting-ners.html#cb52-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-70"><a href="extracting-ners.html#cb52-70" aria-hidden="true" tabindex="-1"></a><span class="co">#ORG - organisations</span></span>
<span id="cb52-71"><a href="extracting-ners.html#cb52-71" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ORG_freq(article):   </span>
<span id="cb52-72"><a href="extracting-ners.html#cb52-72" aria-hidden="true" tabindex="-1"></a> ORGs <span class="op">=</span> [token.text <span class="cf">for</span> token <span class="kw">in</span> article <span class="cf">if</span> token.ent_type_ <span class="op">==</span> <span class="st">&quot;ORG&quot;</span>]</span>
<span id="cb52-73"><a href="extracting-ners.html#cb52-73" aria-hidden="true" tabindex="-1"></a> new_ORGs <span class="op">=</span> []</span>
<span id="cb52-74"><a href="extracting-ners.html#cb52-74" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> ORG <span class="kw">in</span> ORGs:</span>
<span id="cb52-75"><a href="extracting-ners.html#cb52-75" aria-hidden="true" tabindex="-1"></a>    ORG <span class="op">=</span> ORG <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> Date</span>
<span id="cb52-76"><a href="extracting-ners.html#cb52-76" aria-hidden="true" tabindex="-1"></a>    ORG <span class="op">=</span> ORG <span class="op">+</span> <span class="st">&quot;_&quot;</span> <span class="op">+</span> <span class="bu">str</span>(article_index)</span>
<span id="cb52-77"><a href="extracting-ners.html#cb52-77" aria-hidden="true" tabindex="-1"></a>    new_ORGs.append(ORG)</span>
<span id="cb52-78"><a href="extracting-ners.html#cb52-78" aria-hidden="true" tabindex="-1"></a> ORG_freq <span class="op">=</span> Counter(new_ORGs)</span>
<span id="cb52-79"><a href="extracting-ners.html#cb52-79" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span>(ORG_freq)</span></code></pre></div>
<p>Next up, we will iterate through all the articles and apply the helper functions to extract entities. This is also quite a large chunk but again there is a lot of repetition. First, we define an index to loop over and then we define empty counter-objects that we can append to in the loop. Then inside the loop we access the date and index of the article and the article itself. We then apply the helper functions from above to such the article dry of entities.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="extracting-ners.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">#defining index to loop over</span></span>
<span id="cb53-2"><a href="extracting-ners.html#cb53-2" aria-hidden="true" tabindex="-1"></a>article_index <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb53-3"><a href="extracting-ners.html#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="extracting-ners.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting up empty Counter-objects to append to in the for-loop</span></span>
<span id="cb53-5"><a href="extracting-ners.html#cb53-5" aria-hidden="true" tabindex="-1"></a>all_nouns <span class="op">=</span> Counter()</span>
<span id="cb53-6"><a href="extracting-ners.html#cb53-6" aria-hidden="true" tabindex="-1"></a>all_verbs <span class="op">=</span> Counter()</span>
<span id="cb53-7"><a href="extracting-ners.html#cb53-7" aria-hidden="true" tabindex="-1"></a>all_adjectives <span class="op">=</span> Counter()</span>
<span id="cb53-8"><a href="extracting-ners.html#cb53-8" aria-hidden="true" tabindex="-1"></a>all_GPEs <span class="op">=</span> Counter()</span>
<span id="cb53-9"><a href="extracting-ners.html#cb53-9" aria-hidden="true" tabindex="-1"></a>all_FACs <span class="op">=</span> Counter()</span>
<span id="cb53-10"><a href="extracting-ners.html#cb53-10" aria-hidden="true" tabindex="-1"></a>all_persons <span class="op">=</span> Counter()</span>
<span id="cb53-11"><a href="extracting-ners.html#cb53-11" aria-hidden="true" tabindex="-1"></a>all_ORGs <span class="op">=</span> Counter()</span>
<span id="cb53-12"><a href="extracting-ners.html#cb53-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-13"><a href="extracting-ners.html#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="co">#looping over bread texts from all articles and running the functions on them</span></span>
<span id="cb53-14"><a href="extracting-ners.html#cb53-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> article <span class="kw">in</span> df.index:</span>
<span id="cb53-15"><a href="extracting-ners.html#cb53-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">#accesing the Date of the article</span></span>
<span id="cb53-16"><a href="extracting-ners.html#cb53-16" aria-hidden="true" tabindex="-1"></a>    Date <span class="op">=</span> df.iloc[article_index, <span class="dv">3</span>]</span>
<span id="cb53-17"><a href="extracting-ners.html#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">#load article using index</span></span>
<span id="cb53-18"><a href="extracting-ners.html#cb53-18" aria-hidden="true" tabindex="-1"></a>    article <span class="op">=</span> df.iloc[article_index,<span class="dv">5</span>] </span>
<span id="cb53-19"><a href="extracting-ners.html#cb53-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">#making article to an nlp-object</span></span>
<span id="cb53-20"><a href="extracting-ners.html#cb53-20" aria-hidden="true" tabindex="-1"></a>    article <span class="op">=</span> nlp(article)</span>
<span id="cb53-21"><a href="extracting-ners.html#cb53-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-22"><a href="extracting-ners.html#cb53-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">#-------------------------------------------------------------------</span></span>
<span id="cb53-23"><a href="extracting-ners.html#cb53-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">#------ Counting all objects-of-interest in Counter-objects --------</span></span>
<span id="cb53-24"><a href="extracting-ners.html#cb53-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">#-------------------------------------------------------------------</span></span>
<span id="cb53-25"><a href="extracting-ners.html#cb53-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">#nouns</span></span>
<span id="cb53-26"><a href="extracting-ners.html#cb53-26" aria-hidden="true" tabindex="-1"></a>    some_nouns <span class="op">=</span> noun_freq(article)</span>
<span id="cb53-27"><a href="extracting-ners.html#cb53-27" aria-hidden="true" tabindex="-1"></a>    all_nouns <span class="op">+=</span> some_nouns</span>
<span id="cb53-28"><a href="extracting-ners.html#cb53-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">#verbs</span></span>
<span id="cb53-29"><a href="extracting-ners.html#cb53-29" aria-hidden="true" tabindex="-1"></a>    some_verbs <span class="op">=</span> verb_freq(article)</span>
<span id="cb53-30"><a href="extracting-ners.html#cb53-30" aria-hidden="true" tabindex="-1"></a>    all_verbs <span class="op">+=</span> some_verbs</span>
<span id="cb53-31"><a href="extracting-ners.html#cb53-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">#adjectives</span></span>
<span id="cb53-32"><a href="extracting-ners.html#cb53-32" aria-hidden="true" tabindex="-1"></a>    some_adjectives <span class="op">=</span> adjective_freq(article)</span>
<span id="cb53-33"><a href="extracting-ners.html#cb53-33" aria-hidden="true" tabindex="-1"></a>    all_adjectives <span class="op">+=</span> some_adjectives</span>
<span id="cb53-34"><a href="extracting-ners.html#cb53-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">#GPEs</span></span>
<span id="cb53-35"><a href="extracting-ners.html#cb53-35" aria-hidden="true" tabindex="-1"></a>    some_GPEs <span class="op">=</span> GPE_freq(article)</span>
<span id="cb53-36"><a href="extracting-ners.html#cb53-36" aria-hidden="true" tabindex="-1"></a>    all_GPEs <span class="op">+=</span> some_GPEs</span>
<span id="cb53-37"><a href="extracting-ners.html#cb53-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">#FACs</span></span>
<span id="cb53-38"><a href="extracting-ners.html#cb53-38" aria-hidden="true" tabindex="-1"></a>    some_FACs <span class="op">=</span> FAC_freq(article)</span>
<span id="cb53-39"><a href="extracting-ners.html#cb53-39" aria-hidden="true" tabindex="-1"></a>    all_FACs <span class="op">+=</span> some_FACs </span>
<span id="cb53-40"><a href="extracting-ners.html#cb53-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">#persons</span></span>
<span id="cb53-41"><a href="extracting-ners.html#cb53-41" aria-hidden="true" tabindex="-1"></a>    some_persons <span class="op">=</span> person_freq(article)</span>
<span id="cb53-42"><a href="extracting-ners.html#cb53-42" aria-hidden="true" tabindex="-1"></a>    all_persons <span class="op">+=</span> some_persons</span>
<span id="cb53-43"><a href="extracting-ners.html#cb53-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">#ORGs</span></span>
<span id="cb53-44"><a href="extracting-ners.html#cb53-44" aria-hidden="true" tabindex="-1"></a>    some_ORGs <span class="op">=</span> ORG_freq(article)</span>
<span id="cb53-45"><a href="extracting-ners.html#cb53-45" aria-hidden="true" tabindex="-1"></a>    all_ORGs <span class="op">+=</span> some_ORGs</span>
<span id="cb53-46"><a href="extracting-ners.html#cb53-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-47"><a href="extracting-ners.html#cb53-47" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb53-48"><a href="extracting-ners.html#cb53-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">#indexing to next article</span></span>
<span id="cb53-49"><a href="extracting-ners.html#cb53-49" aria-hidden="true" tabindex="-1"></a>    article_index <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb53-50"><a href="extracting-ners.html#cb53-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-51"><a href="extracting-ners.html#cb53-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">#checking progress</span></span>
<span id="cb53-52"><a href="extracting-ners.html#cb53-52" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(article_index)</span></code></pre></div>
<p>Now we have one counter object for each category, e.g. GPEs or persons. I realized that there were issues with some of the values. Here we make sure that all the values are in the same format of “word_date_index.” We basically remove values that has more than two "_".</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="extracting-ners.html#cb54-1" aria-hidden="true" tabindex="-1"></a>counter_objects <span class="op">=</span> [all_nouns, all_verbs, all_adjectives, all_GPEs, all_FACs, all_persons, all_ORGs]</span>
<span id="cb54-2"><a href="extracting-ners.html#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="extracting-ners.html#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="extracting-ners.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> counter_object <span class="kw">in</span> counter_objects:</span>
<span id="cb54-5"><a href="extracting-ners.html#cb54-5" aria-hidden="true" tabindex="-1"></a>    to_be_deleted <span class="op">=</span> []</span>
<span id="cb54-6"><a href="extracting-ners.html#cb54-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb54-7"><a href="extracting-ners.html#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#finding the malformity</span></span>
<span id="cb54-8"><a href="extracting-ners.html#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ele <span class="kw">in</span> counter_object:</span>
<span id="cb54-9"><a href="extracting-ners.html#cb54-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ele.count(<span class="st">&quot;_&quot;</span>) <span class="op">!=</span> <span class="dv">2</span>:</span>
<span id="cb54-10"><a href="extracting-ners.html#cb54-10" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(ele)</span>
<span id="cb54-11"><a href="extracting-ners.html#cb54-11" aria-hidden="true" tabindex="-1"></a>            to_be_deleted.append(ele)</span>
<span id="cb54-12"><a href="extracting-ners.html#cb54-12" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb54-13"><a href="extracting-ners.html#cb54-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#deleting the malformity</span></span>
<span id="cb54-14"><a href="extracting-ners.html#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ele <span class="kw">in</span> to_be_deleted:</span>
<span id="cb54-15"><a href="extracting-ners.html#cb54-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ele <span class="kw">in</span> counter_object:</span>
<span id="cb54-16"><a href="extracting-ners.html#cb54-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">del</span> counter_object[ele]</span></code></pre></div>
<p>Cleaning done. Now we have one counter object for each category and we want to save those to plain old dataframes. A format that we know and love. Again there is quite a bit of repetition but in short it goes down like this: First, the counter object is saved to a pandas dataframe, the columns are renamed and sorted by <code>count</code> so that values with highest count appears first. Then the values which has the format “word_date_index” are split into three columns, <code>word</code>, <code>date</code> and <code>index</code>. Lastly the dataframe is saved. The result is one dataframe for each category, each containing three columns <code>word</code>, <code>date</code>, <code>index</code> and <code>count</code>.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="extracting-ners.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Saving all the counter-objects to individual dataframes</span></span>
<span id="cb55-2"><a href="extracting-ners.html#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="extracting-ners.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co">#all_nouns</span></span>
<span id="cb55-4"><a href="extracting-ners.html#cb55-4" aria-hidden="true" tabindex="-1"></a>df_all_nouns <span class="op">=</span> pd.DataFrame.from_dict(all_nouns, orient<span class="op">=</span><span class="st">&#39;index&#39;</span>).reset_index()</span>
<span id="cb55-5"><a href="extracting-ners.html#cb55-5" aria-hidden="true" tabindex="-1"></a>df_all_nouns <span class="op">=</span> df_all_nouns.rename(columns<span class="op">=</span>{<span class="st">&#39;index&#39;</span>:<span class="st">&#39;word&#39;</span>, <span class="dv">0</span>:<span class="st">&#39;count&#39;</span>})</span>
<span id="cb55-6"><a href="extracting-ners.html#cb55-6" aria-hidden="true" tabindex="-1"></a>df_all_nouns <span class="op">=</span> df_all_nouns.sort_values(by<span class="op">=</span><span class="st">&#39;count&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-7"><a href="extracting-ners.html#cb55-7" aria-hidden="true" tabindex="-1"></a>df_all_nouns[[<span class="st">&#39;noun&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;article_index&#39;</span>]] <span class="op">=</span> df_all_nouns.word.<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>,expand<span class="op">=</span><span class="va">True</span>,)</span>
<span id="cb55-8"><a href="extracting-ners.html#cb55-8" aria-hidden="true" tabindex="-1"></a>df_all_nouns.to_csv(<span class="st">&quot;data/new_york_times/data_NER/noun.csv&quot;</span>, index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-9"><a href="extracting-ners.html#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="extracting-ners.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co">#all_verbs</span></span>
<span id="cb55-11"><a href="extracting-ners.html#cb55-11" aria-hidden="true" tabindex="-1"></a>df_all_verbs <span class="op">=</span> pd.DataFrame.from_dict(all_verbs, orient<span class="op">=</span><span class="st">&#39;index&#39;</span>).reset_index()</span>
<span id="cb55-12"><a href="extracting-ners.html#cb55-12" aria-hidden="true" tabindex="-1"></a>df_all_verbs <span class="op">=</span> df_all_verbs.rename(columns<span class="op">=</span>{<span class="st">&#39;index&#39;</span>:<span class="st">&#39;word&#39;</span>, <span class="dv">0</span>:<span class="st">&#39;count&#39;</span>})</span>
<span id="cb55-13"><a href="extracting-ners.html#cb55-13" aria-hidden="true" tabindex="-1"></a>df_all_verbs <span class="op">=</span> df_all_verbs.sort_values(by<span class="op">=</span><span class="st">&#39;count&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-14"><a href="extracting-ners.html#cb55-14" aria-hidden="true" tabindex="-1"></a>df_all_verbs[[<span class="st">&#39;verb&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;article_index&#39;</span>]] <span class="op">=</span> df_all_verbs.word.<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>,expand<span class="op">=</span><span class="va">True</span>,)</span>
<span id="cb55-15"><a href="extracting-ners.html#cb55-15" aria-hidden="true" tabindex="-1"></a>df_all_verbs.to_csv(<span class="st">&quot;data/new_york_times/data_NER/verb.csv&quot;</span>, index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-16"><a href="extracting-ners.html#cb55-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-17"><a href="extracting-ners.html#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="co">#all_adjectives</span></span>
<span id="cb55-18"><a href="extracting-ners.html#cb55-18" aria-hidden="true" tabindex="-1"></a>df_all_adjectives <span class="op">=</span> pd.DataFrame.from_dict(all_adjectives, orient<span class="op">=</span><span class="st">&#39;index&#39;</span>).reset_index()</span>
<span id="cb55-19"><a href="extracting-ners.html#cb55-19" aria-hidden="true" tabindex="-1"></a>df_all_adjectives <span class="op">=</span> df_all_adjectives.rename(columns<span class="op">=</span>{<span class="st">&#39;index&#39;</span>:<span class="st">&#39;word&#39;</span>, <span class="dv">0</span>:<span class="st">&#39;count&#39;</span>})</span>
<span id="cb55-20"><a href="extracting-ners.html#cb55-20" aria-hidden="true" tabindex="-1"></a>df_all_adjectives <span class="op">=</span> df_all_adjectives.sort_values(by<span class="op">=</span><span class="st">&#39;count&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-21"><a href="extracting-ners.html#cb55-21" aria-hidden="true" tabindex="-1"></a>df_all_adjectives[[<span class="st">&#39;adjective&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;article_index&#39;</span>]] <span class="op">=</span> df_all_adjectives.word.<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>,expand<span class="op">=</span><span class="va">True</span>,)</span>
<span id="cb55-22"><a href="extracting-ners.html#cb55-22" aria-hidden="true" tabindex="-1"></a>df_all_adjectives.to_csv(<span class="st">&quot;data/new_york_times/data_NER/adjective.csv&quot;</span>, index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-23"><a href="extracting-ners.html#cb55-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-24"><a href="extracting-ners.html#cb55-24" aria-hidden="true" tabindex="-1"></a><span class="co">#all_GPEs</span></span>
<span id="cb55-25"><a href="extracting-ners.html#cb55-25" aria-hidden="true" tabindex="-1"></a>df_all_GPEs <span class="op">=</span> pd.DataFrame.from_dict(all_GPEs, orient<span class="op">=</span><span class="st">&#39;index&#39;</span>).reset_index()</span>
<span id="cb55-26"><a href="extracting-ners.html#cb55-26" aria-hidden="true" tabindex="-1"></a>df_all_GPEs <span class="op">=</span> df_all_GPEs.rename(columns<span class="op">=</span>{<span class="st">&#39;index&#39;</span>:<span class="st">&#39;word&#39;</span>, <span class="dv">0</span>:<span class="st">&#39;count&#39;</span>})</span>
<span id="cb55-27"><a href="extracting-ners.html#cb55-27" aria-hidden="true" tabindex="-1"></a>df_all_GPEs <span class="op">=</span> df_all_GPEs.sort_values(by<span class="op">=</span><span class="st">&#39;count&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-28"><a href="extracting-ners.html#cb55-28" aria-hidden="true" tabindex="-1"></a>df_all_GPEs[[<span class="st">&#39;GPE&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;article_index&#39;</span>]] <span class="op">=</span> df_all_GPEs.word.<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>,expand<span class="op">=</span><span class="va">True</span>,)</span>
<span id="cb55-29"><a href="extracting-ners.html#cb55-29" aria-hidden="true" tabindex="-1"></a>df_all_GPEs.to_csv(<span class="st">&quot;data/new_york_times/data_NER/GPE.csv&quot;</span>, index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-30"><a href="extracting-ners.html#cb55-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-31"><a href="extracting-ners.html#cb55-31" aria-hidden="true" tabindex="-1"></a><span class="co">#all_FACs</span></span>
<span id="cb55-32"><a href="extracting-ners.html#cb55-32" aria-hidden="true" tabindex="-1"></a>df_all_FACs <span class="op">=</span> pd.DataFrame.from_dict(all_FACs, orient<span class="op">=</span><span class="st">&#39;index&#39;</span>).reset_index()</span>
<span id="cb55-33"><a href="extracting-ners.html#cb55-33" aria-hidden="true" tabindex="-1"></a>df_all_FACs <span class="op">=</span> df_all_FACs.rename(columns<span class="op">=</span>{<span class="st">&#39;index&#39;</span>:<span class="st">&#39;word&#39;</span>, <span class="dv">0</span>:<span class="st">&#39;count&#39;</span>})</span>
<span id="cb55-34"><a href="extracting-ners.html#cb55-34" aria-hidden="true" tabindex="-1"></a>df_all_FACs <span class="op">=</span> df_all_FACs.sort_values(by<span class="op">=</span><span class="st">&#39;count&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-35"><a href="extracting-ners.html#cb55-35" aria-hidden="true" tabindex="-1"></a>df_all_FACs[[<span class="st">&#39;FAC&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;article_index&#39;</span>]] <span class="op">=</span> df_all_FACs.word.<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>,expand<span class="op">=</span><span class="va">True</span>,)</span>
<span id="cb55-36"><a href="extracting-ners.html#cb55-36" aria-hidden="true" tabindex="-1"></a>df_all_FACs.to_csv(<span class="st">&quot;data/new_york_times/data_NER/FAC.csv&quot;</span>, index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-37"><a href="extracting-ners.html#cb55-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-38"><a href="extracting-ners.html#cb55-38" aria-hidden="true" tabindex="-1"></a><span class="co">#all_persons</span></span>
<span id="cb55-39"><a href="extracting-ners.html#cb55-39" aria-hidden="true" tabindex="-1"></a>df_all_persons <span class="op">=</span> pd.DataFrame.from_dict(all_persons, orient<span class="op">=</span><span class="st">&#39;index&#39;</span>).reset_index()</span>
<span id="cb55-40"><a href="extracting-ners.html#cb55-40" aria-hidden="true" tabindex="-1"></a>df_all_persons <span class="op">=</span> df_all_persons.rename(columns<span class="op">=</span>{<span class="st">&#39;index&#39;</span>:<span class="st">&#39;word&#39;</span>, <span class="dv">0</span>:<span class="st">&#39;count&#39;</span>})</span>
<span id="cb55-41"><a href="extracting-ners.html#cb55-41" aria-hidden="true" tabindex="-1"></a>df_all_persons <span class="op">=</span> df_all_persons.sort_values(by<span class="op">=</span><span class="st">&#39;count&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-42"><a href="extracting-ners.html#cb55-42" aria-hidden="true" tabindex="-1"></a>df_all_persons[[<span class="st">&#39;person&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;article_index&#39;</span>]] <span class="op">=</span> df_all_persons.word.<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>,expand<span class="op">=</span><span class="va">True</span>,)</span>
<span id="cb55-43"><a href="extracting-ners.html#cb55-43" aria-hidden="true" tabindex="-1"></a>df_all_persons.to_csv(<span class="st">&quot;data/new_york_times/data_NER/person.csv&quot;</span>, index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-44"><a href="extracting-ners.html#cb55-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-45"><a href="extracting-ners.html#cb55-45" aria-hidden="true" tabindex="-1"></a><span class="co">#all_ORGs</span></span>
<span id="cb55-46"><a href="extracting-ners.html#cb55-46" aria-hidden="true" tabindex="-1"></a>df_all_ORGs <span class="op">=</span> pd.DataFrame.from_dict(all_ORGs, orient<span class="op">=</span><span class="st">&#39;index&#39;</span>).reset_index()</span>
<span id="cb55-47"><a href="extracting-ners.html#cb55-47" aria-hidden="true" tabindex="-1"></a>df_all_ORGs <span class="op">=</span> df_all_ORGs.rename(columns<span class="op">=</span>{<span class="st">&#39;index&#39;</span>:<span class="st">&#39;word&#39;</span>, <span class="dv">0</span>:<span class="st">&#39;count&#39;</span>})</span>
<span id="cb55-48"><a href="extracting-ners.html#cb55-48" aria-hidden="true" tabindex="-1"></a>df_all_ORGs <span class="op">=</span> df_all_ORGs.sort_values(by<span class="op">=</span><span class="st">&#39;count&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb55-49"><a href="extracting-ners.html#cb55-49" aria-hidden="true" tabindex="-1"></a>df_all_ORGs[[<span class="st">&#39;ORG&#39;</span>, <span class="st">&#39;date&#39;</span>, <span class="st">&#39;article_index&#39;</span>]] <span class="op">=</span> df_all_ORGs.word.<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>,expand<span class="op">=</span><span class="va">True</span>,)</span>
<span id="cb55-50"><a href="extracting-ners.html#cb55-50" aria-hidden="true" tabindex="-1"></a>df_all_ORGs.to_csv(<span class="st">&quot;data/new_york_times/data_NER/ORG.csv&quot;</span>, index <span class="op">=</span> <span class="va">False</span>)</span></code></pre></div>
<p>We have now successfully extracked the entities and can move on!</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="overview-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="maps-vizualisations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/09_NERextraction.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
